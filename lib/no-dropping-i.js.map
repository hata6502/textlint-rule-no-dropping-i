{"version":3,"sources":["../src/no-dropping-i.js"],"names":["require","RuleHelper","kuromojin","isTargetWord","token","pos","pos_detail_1","basic_form","isMasuWord","module","exports","context","helper","Syntax","report","getSource","RuleError","Str","node","isChildNode","Link","Image","BlockQuote","Emphasis","text","tokenize","then","tokens","reduce","prev","current","index","word_position"],"mappings":"AAAA;AACA;;;;eACuBA,OAAO,CAAC,sBAAD,C;IAAtBC,U,YAAAA,U;;AACR,IAAMC,SAAS,GAAGF,OAAO,CAAC,WAAD,CAAzB;;AAEA,SAASG,YAAT,CAAsBC,KAAtB,EAA6B;AACzB,SAAOA,KAAK,CAACC,GAAN,IAAa,IAAb,IAAqBD,KAAK,CAACE,YAAN,IAAsB,MAA3C,IAAqDF,KAAK,CAACG,UAAN,IAAoB,GAAhF;AACH;;AAED,SAASC,UAAT,CAAoBJ,KAApB,EAA2B;AACvB,SAAOA,KAAK,CAACC,GAAN,IAAa,KAAb,IAAsBD,KAAK,CAACE,YAAN,IAAsB,GAA5C,IAAmDF,KAAK,CAACG,UAAN,IAAoB,IAA9E;AACH;;AAEDE,MAAM,CAACC,OAAP,GAAiB,UAASC,OAAT,EAAkB;AAC/B,MAAMC,MAAM,GAAG,IAAIX,UAAJ,CAAeU,OAAf,CAAf;AAD+B,MAEzBE,MAFyB,GAEgBF,OAFhB,CAEzBE,MAFyB;AAAA,MAEjBC,MAFiB,GAEgBH,OAFhB,CAEjBG,MAFiB;AAAA,MAETC,SAFS,GAEgBJ,OAFhB,CAETI,SAFS;AAAA,MAEEC,SAFF,GAEgBL,OAFhB,CAEEK,SAFF;AAG/B,6BACKH,MAAM,CAACI,GADZ,YACiBC,IADjB,EACuB;AACf,QAAIN,MAAM,CAACO,WAAP,CAAmBD,IAAnB,EAAyB,CAACL,MAAM,CAACO,IAAR,EAAcP,MAAM,CAACQ,KAArB,EAA4BR,MAAM,CAACS,UAAnC,EAA+CT,MAAM,CAACU,QAAtD,CAAzB,CAAJ,EAA+F;AAC3F;AACH;;AACD,QAAIC,IAAI,GAAGT,SAAS,CAACG,IAAD,CAApB;AACA,WAAOhB,SAAS,CAACuB,QAAV,CAAmBD,IAAnB,EAAyBE,IAAzB,CAA8B,UAAAC,MAAM,EAAI;AAC3CA,MAAAA,MAAM,CAACC,MAAP,CAAc,UAACC,IAAD,EAAOC,OAAP,EAAmB;AAC7B,YAAI3B,YAAY,CAAC0B,IAAD,CAAZ,IAAsBrB,UAAU,CAACsB,OAAD,CAApC,EAA+C;AAC3ChB,UAAAA,MAAM,CACFI,IADE,EAEF,IAAIF,SAAJ,CAAc,gBAAd,EAAgC;AAC5Be,YAAAA,KAAK,EAAED,OAAO,CAACE,aAAR,GAAwB;AADH,WAAhC,CAFE,CAAN;AAMH;;AACD,eAAOF,OAAP;AACH,OAVD;AAWH,KAZM,CAAP;AAaH,GAnBL;AAqBH,CAxBD","sourcesContent":["// LICENSE : MIT\n\"use strict\";\nconst { RuleHelper } = require(\"textlint-rule-helper\");\nconst kuromojin = require(\"kuromojin\");\n\nfunction isTargetWord(token) {\n    return token.pos == \"助詞\" && token.pos_detail_1 == \"接続助詞\" && token.basic_form == \"て\";\n}\n\nfunction isMasuWord(token) {\n    return token.pos == \"助動詞\" && token.pos_detail_1 == \"*\" && token.basic_form == \"ます\";\n}\n\nmodule.exports = function(context) {\n    const helper = new RuleHelper(context);\n    let { Syntax, report, getSource, RuleError } = context;\n    return {\n        [Syntax.Str](node) {\n            if (helper.isChildNode(node, [Syntax.Link, Syntax.Image, Syntax.BlockQuote, Syntax.Emphasis])) {\n                return;\n            }\n            let text = getSource(node);\n            return kuromojin.tokenize(text).then(tokens => {\n                tokens.reduce((prev, current) => {\n                    if (isTargetWord(prev) && isMasuWord(current)) {\n                        report(\n                            node,\n                            new RuleError(\"い抜き言葉を使用しています。\", {\n                                index: current.word_position - 1\n                            })\n                        );\n                    }\n                    return current;\n                });\n            });\n        }\n    };\n};\n"],"file":"no-dropping-i.js"}